---
// Используем встроенный Image из astro:assets
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  src: string | ImageMetadata;
  alt: string;
  width?: number;
  height?: number;
  loading?: 'eager' | 'lazy';
  format?: 'avif' | 'webp' | 'png' | 'jpeg';
  quality?: number;
  class?: string;
}

const { src, alt, width, height, loading = 'lazy', format = ['webp'], quality = 80, class: className } = Astro.props;

Astro.props;
// Извлекаем параметры из ImageMetadata (если передан объект)
const finalSrc = typeof src === 'string' ? src : src.src;
const finalWidth = width || (typeof src !== 'string' ? src.width : undefined);
const finalHeight = height || (typeof src !== 'string' ? src.height : undefined);
---

<Image src={finalSrc} alt={alt} width={finalWidth} height={finalHeight} format={format} quality={quality} loading={loading} class={className} />
